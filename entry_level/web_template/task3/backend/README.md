# Backend preset with wt-types transpilation
___
***gulp-types branch***

Готовый пресет на основе gulp и webtutor-types библиотеки для разработки бекенда на TypeScript.

## Операции
___
### Отслеживание файлов
Начать отслеживание файлов командой:

```bash
npm start
```
Позволяет автоматически при сохранении делать транспиляцию и сборку файла

### Сборка файлов
Если не нужно отслеживать изменения в файле, достаточно просто запустить ```npm run build``` для сборки

## Конфигурация
___

### Конфигурация путей и файлов
Определяются в директории ``gulp/consts.ts``.  
- ``SRC_PATH`` - путь к корню проекта
- ``TS_CONFIG_PATH`` - путь к конфиг файлу ts
- ``BUILD_PATH`` - путь к папке билда
- ``WATCHED_TS_TYPES`` - отслеживаемые **при сохранении** и транспилируемые ts пути или файлы
- ``WATCHED_OTHER_TYPES`` - отслеживаемые **при сохранении** пути или файлы других типов (можете добавлять любые расширения которые вам нужны)
- ``WATCHED_ADDED_TYPES`` - отслеживаемые **при создании** пути или файлы
- ``WATCHED_DEL_FILES`` - отс леживаемые **при удалении** пути или файлы

По умолчанию для билда отслеживаются все пути прописанные в ``consts``, но только при отслеживании файлов. При сборке через ``npm run build`` по умолчанию собираются только ts файлы. Если необходимо изменить эту логику - меняйте ``task-dev, task-build`` в файле ``gulp.ts``

### Конфигурация ts

В ``src/tsconfig.json`` определяется основная конфигурация для ts файлов бекенда.<br/>
Подключаемые директории прописываются в ``include``:
```json
"include": [
	"./**/*.ts"
]
```

## Процесс
___
Весь процесс сборки ts состоит из:   
- Линтирования ESlint
- Автофикса по линту если это возможно
- Транспилирования файла ts
	- Замена импртов и экспортов
	- createProject на основе tsconfig файла и подключенных в нем библиотек
	- Замена символов \n \t, при конвертации мультилайн строк, в переносы и табуляции
- Добавление в транспилированный файл обрамляющих конструкций ``<%...%>``
- Изменения кодировки файла на ufeff - utf8-with-bom
- Сохранение в папку билда

Настройки для .eslintrc.json должны быть едиными на всех проектах.

